# =============================================================================
# MY PET CARE - Backend Environment Variables
# =============================================================================
# 
# IMPORTANTE: Copia questo file in `.env` e compila con i valori reali
# 
#   cp .env.example .env
#
# NON committare il file .env su Git!
# =============================================================================

# -----------------------------------------------------------------------------
# 1. FIREBASE CONFIGURATION
# -----------------------------------------------------------------------------
# Ottieni questi valori da:
# Firebase Console → Project Settings → Service Accounts → Generate new private key
#
# NOTA: Per il deploy su Cloud Run, usa la chiave completa JSON
#       Per sviluppo locale, puoi usare il file JSON direttamente

GOOGLE_APPLICATION_CREDENTIALS=path/to/your/firebase-admin-sdk.json

# Firebase Project ID (visibile in Firebase Console)
FIREBASE_PROJECT_ID=pet-care-9790d

# Firebase Storage Bucket
FIREBASE_STORAGE_BUCKET=pet-care-9790d.appspot.com

# -----------------------------------------------------------------------------
# 2. STRIPE PAYMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Ottieni le chiavi da: https://dashboard.stripe.com/apikeys

# Stripe Secret Key (per backend - inizia con sk_)
STRIPE_SECRET_KEY=sk_test_51...

# Stripe Publishable Key (per frontend - inizia con pk_)
# NOTA: Questa va anche nel frontend Flutter (config.dart)
STRIPE_PUBLISHABLE_KEY=pk_test_51...

# Stripe Webhook Secret (per validare webhook)
# Ottieni da: Stripe Dashboard → Developers → Webhooks → Add endpoint
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs per abbonamenti
STRIPE_MONTHLY_PRICE_ID=price_1ABC123...
STRIPE_YEARLY_PRICE_ID=price_1DEF456...

# -----------------------------------------------------------------------------
# 3. PAYPAL PAYMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Ottieni le credenziali da: https://developer.paypal.com/dashboard/

# PayPal Client ID
PAYPAL_CLIENT_ID=YOUR_PAYPAL_CLIENT_ID_HERE

# PayPal Secret
PAYPAL_SECRET=YOUR_PAYPAL_SECRET_HERE

# PayPal Environment (sandbox o live)
# Sandbox: https://api-m.sandbox.paypal.com
# Production: https://api-m.paypal.com
PAYPAL_API=https://api-m.sandbox.paypal.com

# PayPal Webhook ID (per validare webhook)
PAYPAL_WEBHOOK_ID=YOUR_PAYPAL_WEBHOOK_ID_HERE

# -----------------------------------------------------------------------------
# 4. GOOGLE MAPS API KEYS
# -----------------------------------------------------------------------------
# Ottieni le chiavi da: https://console.cloud.google.com/apis/credentials
#
# IMPORTANTE: Crea chiavi separate per Android, iOS e Web con restrizioni appropriate

# Android API Key (con restrizione app Android e SHA-1)
GOOGLE_MAPS_ANDROID_KEY=AIzaSy...

# iOS API Key (con restrizione app iOS e Bundle ID)
GOOGLE_MAPS_IOS_KEY=AIzaSy...

# Web API Key (con restrizione HTTP referrer)
GOOGLE_MAPS_WEB_KEY=AIzaSy...

# -----------------------------------------------------------------------------
# 5. CORS CONFIGURATION
# -----------------------------------------------------------------------------
# URL delle app client autorizzate (separati da virgola)
# Include tutti i domini dove il frontend può essere hosted

CORS_ALLOWED_ORIGINS=https://pet-care-9790d.web.app,https://pet-care-9790d.firebaseapp.com,http://localhost:5060

# -----------------------------------------------------------------------------
# 6. BACKEND URLs
# -----------------------------------------------------------------------------
# URL del backend per chiamate API

# Development
BACKEND_BASE_URL=http://localhost:8080

# Production (dopo deploy su Cloud Run)
# BACKEND_BASE_URL=https://mypetcare-backend-xxx-ew.a.run.app

# Frontend URL (per redirect payment)
WEB_URL=https://pet-care-9790d.web.app

# -----------------------------------------------------------------------------
# 7. NODE ENVIRONMENT
# -----------------------------------------------------------------------------
# Environment mode: development | production

NODE_ENV=development

# Server Port (per sviluppo locale)
PORT=8080

# -----------------------------------------------------------------------------
# 8. EMAIL/NOTIFICATION CONFIGURATION (Optional)
# -----------------------------------------------------------------------------
# Se vuoi inviare email di notifica

# SendGrid API Key (esempio)
# SENDGRID_API_KEY=SG.xxx

# Email mittente
# EMAIL_FROM=noreply@mypetcare.app

# -----------------------------------------------------------------------------
# 9. SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
# JWT Secret per generazione token (se usato)
# JWT_SECRET=your_super_secret_jwt_key_here

# Session Secret
# SESSION_SECRET=your_session_secret_here

# -----------------------------------------------------------------------------
# 10. RATE LIMITING
# -----------------------------------------------------------------------------
# Numero massimo di richieste per finestra temporale

RATE_LIMIT_WINDOW_MS=900000  # 15 minuti in ms
RATE_LIMIT_MAX_REQUESTS=100  # Max 100 richieste per finestra

# -----------------------------------------------------------------------------
# 11. LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
# Livello di log: error | warn | info | http | verbose | debug | silly

LOG_LEVEL=info

# =============================================================================
# ISTRUZIONI PER DEPLOY SU CLOUD RUN
# =============================================================================
#
# 1. Crea il file .env con tutti i valori reali
# 2. Durante il deploy, passa le variabili tramite --set-env-vars:
#
#    gcloud run deploy mypetcare-backend \
#      --region=europe-west1 \
#      --set-env-vars="FIREBASE_PROJECT_ID=pet-care-9790d" \
#      --set-env-vars="STRIPE_SECRET_KEY=sk_live_..." \
#      --set-env-vars="PAYPAL_CLIENT_ID=..." \
#      ...
#
# 3. Per GOOGLE_APPLICATION_CREDENTIALS su Cloud Run:
#    - Carica il JSON in Secret Manager
#    - Monta come volume nel container
#    - Oppure usa il service account di default di Cloud Run
#
# Vedi: docs/DEPLOY_NOW.md per istruzioni complete
#
# =============================================================================

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
#
# ✅ File .env aggiunto a .gitignore
# ✅ Chiavi API con restrizioni appropriate (Android SHA-1, iOS Bundle ID, Web Referrer)
# ✅ Stripe in test mode durante sviluppo
# ✅ PayPal in sandbox durante sviluppo
# ✅ CORS configurato solo per domini autorizzati
# ✅ Rate limiting attivo
# ✅ Webhook secrets configurati per validazione
# ✅ Credenziali Firebase non committate
#
# =============================================================================
